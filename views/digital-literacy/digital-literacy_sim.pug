
extends ../ui_layout
  
block content
  -var cdn = "https://dhpd030vnpk29.cloudfront.net";
  .computer.only.tablet.only.four.wide.column 
  #content.eight.wide.computer.ten.wide.tablet.sixteen.wide.mobile.column()
    .ui.one.column.centered.grid(style="padding-top:1em;")
      .ui.fixed.bottom.sticky(style="padding-bottom:6em;")
        .ui.icon.compact.message.warning(style="display:none;")#removeHidden
          i.close.icon
          i.question.icon.float
          .content
            .ui.header Need some help? 
            p Make sure you are clicking "Got it" on the blue dots!
          
        .ui.icon.message.warning(style="display:none;")#clickAllDotsWarning
          i.close.icon
          i.hand.pointer.icon.float
          .content
            .ui.header There are still blue dots to find!
            p Click through all of the blue dots to continue.
            
    #step1.ui.fluid.card.dim()
      .ui.dimmer.flag
        .content
          .center
            h2.ui.inverted.icon.header
              i.red.flag.icon
              |                                     You &apos;ve flagged this!
              h3.ui.inverted.header
                span The admins will review this post further. We are sorry you had this experience.
      .content
        .right.floated.meta= "Yesterday"
        a(href='#')
              img.ui.avatar.image(src=cdn+'/profile_pictures/user21.jpg')
              span='Sam Hill'
      .img.post        
        img(src=cdn+'/post_pictures/infolitguided1.png' style='max-width:100%;')

      .content(style="background:rgba(0, 0, 0, 0.05);" data-hint="Be sure to check the article's website. This one is suspicious because of the '.com.co,' a sure sign it's trying to imitate a credible site. Also note the spelling errors in the URL.", data-hintPosition="top-left")
          .read.rounded.right.floated.info_button(id="info_guide_1",style="z-index:9;text-align:center;position:relative;bottom:10px;width:7%;height:auto")
            i.info.icon
          a(onclick='openPost()')
            | WASHINGTON-POSST.COM.CO &nbsp; &nbsp;
          .header(data-hint="You can see that the headline uses shocking language and has a wild image to get people to click on it. This is an example of a clickbait headline.", data-hintPosition="middle-right")
            | The 15 SHOCKING foods that will cause a heart attack !!   
      .extra.content
          p              
          .description="You'll never guess what these are!!!"
      .four.ui.bottom.attached.icon.buttons
        .ui.reply.button(tabindex='0')
          i.reply.icon
          |                             Reply
        .ui.flag.button(tabindex='0')
          i.flag.icon
          |                             Flag
        .ui.share.button(tabindex='0')
          i.share.icon
          |                             Share
        .ui.labeled.button(tabindex='0')
          .ui.like.button
            i.heart.icon
            |                                Like
          a.ui.basic.red.left.pointing.label.count 2
      .content
        .ui.comments
          .comment(commentid='5bbd01d88a48061a73337b96')
            a.avatar
              img(src=cdn+'/profile_pictures/user66.jpeg')
            .content
              a.author Emma Hanson
              .metadata
                span.date Yesterday
                .rating
                  i.heart.icon
                  span.num 1
                  |                                             Likes
              .text omg this is really scary
              .actions
                a.like.comment Like
                a.flag.comment Flag
      .extra.content
        .ui.fluid.left.labeled.right.icon.input
          .ui.label
            img.ui.avatar.image(src=cdn+'/profile_pictures/'+ user.profile.picture, name=user.profile.name)
          input.newcomment(type='text' placeholder='Write a Comment')
          i.big.send.link.icon
    //-#######################
    .ui.fluid.card.dim()
      .ui.dimmer.flag
        .content
          .center
            h2.ui.inverted.icon.header
              i.red.flag.icon
              |                                     You &apos;ve flagged this!
              h3.ui.inverted.header
                span The admins will review this post further. We are sorry you had this experience.
      .content
        .right.floated.meta= "Yesterday"
        a(href='#')
              img.ui.avatar.image(src=cdn+'/profile_pictures/user54.jpg')
              span='Ariel Simon'
      .img.post
        img(src=cdn+'/post_pictures/infolitguided2.png' style='max-width:100%;')
      .content(style="background:rgba(0, 0, 0, 0.05);")
          .read.rounded.right.floated.info_button(id="info_guide_2",style="z-index:9;text-align:center;position:relative;bottom:10px;width:7%;height:auto")
            i.info.icon
          a#article1(onclick='openPost()')
            | WWW.NYTIMES.COM
          .header Mass Migration of Painted Lady Butterflies Entrances Californains   
      .extra.content
          p              
          .description="The orange butterflies, called painted ladies, are known to travel annually from the deserts of Southern California to the Pacific Northwest."
      .four.ui.bottom.attached.icon.buttons
        .ui.reply.button(tabindex='0')
          i.reply.icon
          |                             Reply
        .ui.flag.button(tabindex='0')
          i.flag.icon
          |                             Flag
        .ui.share.button(tabindex='0')
          i.share.icon
          |                             Share
        .ui.labeled.button(tabindex='0')
          .ui.like.button
            i.heart.icon
            |                                 Like
          a.ui.basic.red.left.pointing.label.count 2
      .content
        .ui.comments
          .comment(commentid='5bbd01d88a48061a73337b96')
            a.avatar
              img(src=cdn+'/profile_pictures/user24.jpg')
            .content
              a.author Jenny Chen
              .metadata
                span.date Yesterday
                .rating
                  i.heart.icon
                  span.num 1
                  |                                             Likes
              .text So beautifulü¶ãüòç
              .actions
                a.like.comment Like
                a.flag.comment Flag
      .extra.content
        .ui.fluid.left.labeled.right.icon.input
          .ui.label
            img.ui.avatar.image(src=cdn+'/profile_pictures/'+user.profile.picture, name=user.profile.name)
          input.newcomment(type='text' placeholder='Write a Comment')
          i.big.send.link.icon


    //-#######################
    .ui.fluid.card.dim()
      .ui.dimmer.flag
        .content
          .center
            h2.ui.inverted.icon.header
              i.red.flag.icon
              |                                     You &apos;ve flagged this!
              h3.ui.inverted.header
                span The admins will review this post further. We are sorry you had this experience.
      .content
        .right.floated.meta= "Yesterday"
        a(href='#')
              img.ui.avatar.image(src=cdn+'/profile_pictures/user33.jpg')
              span='Sean Gomez'
      .img.post
        img(src=cdn+'/post_pictures/infolitguided4.jpg' style='max-width:100%;')
      .content(style="background:rgba(0, 0, 0, 0.05);")
          .read.rounded.right.floated.info_button(id="info_guide_4",style="z-index:9;text-align:center;position:relative;bottom:10px;width:7%;height:auto")
            i.info.icon
          a#article1(onclick='openPost()')
            | CNN-LOCAL8.COM.CO &nbsp; &nbsp;
          a(href='#',data-hint="After analyzing the headline and image, be sure to click on the article link to read the article more closely.")
          .header Missouri Teen's House Burns Down After Fidget Spinner Catches Fire   
      .extra.content
          p              
          .description="Police received a distress call from the 13 year old Jonathon Engelbert, of Kansas City, MO, late yesterday night. Reports say that the teen's battery powered fidget spinner caught fire and burned their house down."
      .four.ui.bottom.attached.icon.buttons
        .ui.reply.button(tabindex='0')
          i.reply.icon
          |                             Reply
        .ui.flag.button(tabindex='0', data-hint=" If you decide the article is fake news, you can flag the post to report it. Don‚Äôt share the article!")
          i.flag.icon
          |                             Flag
        //-.span()          
        .ui.share.button(tabindex='0')
          i.share.icon
          |                             Share
        .ui.labeled.button(tabindex='0')
          .ui.like.button
            i.heart.icon
            |                                 Like
          a.ui.basic.red.left.pointing.label.count 2
      .content
        .ui.comments
          .comment(commentid='5bbd01d88a48061a73337b96')
            a.avatar
              img(src=cdn+'/profile_pictures/user74.jpg')
            .content
              a.author Ryan Freyer
              .metadata
                span.date Yesterday
                .rating
                  i.heart.icon
                  span.num 1
                  |                                             Likes
              .text omg i can't believe this really happened !!
              .actions
                a.like.comment Like
                a.flag.comment Flag
      .extra.content
        .ui.fluid.left.labeled.right.icon.input
          .ui.label
            img.ui.avatar.image(src=cdn+'/profile_pictures/'+user.profile.picture, name=user.profile.name)
          input.newcomment(type='text' placeholder='Write a Comment')
          i.big.send.link.icon

    .ui.warning.message#clickAllDotsWarning(style="display:none;")
      .header
        | Click through all of the blue dots to continue
    button.ui.big.labeled.icon.button.cybertrans#digitalLiteracySimButton(style="margin-bottom:4em;")
        i.rocket.icon
        |   Let's Continue!


    //- Info Lit Flag Modal  
    .ui.small.info.flag.modal  
      i.close.icon  
      .header You've flagged this article! Do you think there are any signs of fake news? [check multiple]  
      .content
        form.ui.form()  
          .inline.field
            .ui.checkbox
              input.hidden(type='checkbox', tabindex='0')
              label The article had a shocking and exaggerated headline.
          .inline.field
            .ui.checkbox
              input.hidden(type='checkbox', tabindex='0')
              label The article used sensational images.
            label
          .inline.field
            .ui.checkbox
              input.hidden(type='checkbox', tabindex='0')
              label The article had an unusual web address or site name.
          .inline.field
            .ui.checkbox
              input.hidden(type='checkbox', tabindex='0')
              label The article had spelling errors, ALL CAPS, or dramatic punctuation!!!!
          .inline.field
            .ui.checkbox
              input.hidden(type='checkbox', tabindex='0')
              label I didn't see any signs. This could be a real news article. I‚Äôm flagging it for another reason
      
      .actions
        .ui.positive.right.labeled.icon.button
          | Submit
          i.checkmark.icon

    //- View Next Steps Modal      
    .ui.small.modal#next_steps  
      i.close.icon  
      .header You've clicked on this article! Let's explore some things you could do next. 
      .content
          .ui.styled.fluid.accordion
            .title
              //- .ui.fitted.large.checkbox
              //-   input.ui(type="checkbox", checked="")#check
              i.dropdown.icon
              |     Read the full article
            .content
              p.transition.hidden
                | Look out for unbelievable claims or wild images. Check for spelling or grammar mistakes, too!
            .title
              i.dropdown.icon
              |     Check out the website this article is from
            .content
              p
                | If the website is not part of a credible news, academic, or governmental organization, this is a sign the article might not be trustworthy.
            .title
              i.dropdown.icon
              | Fact-check the article by searching the topic on Snopes.com, FactCheck.org, or major news websites.
            .content
              p
                | Corroboration from other sources that confirms or supports a news article is a sign that the information is credible.
            .title
              i.dropdown.icon
              |     Be aware of what you share.
            .content
              p
                | It's easy to quickly like or share something, but you could be spreading fake news! Remember to only like or share articles you know are true.

      .actions
        .ui.positive.right.labeled.icon.button
          | Done
          i.checkmark.icon

    //- View Post Info Modal  
    .ui.small.modal#info_modal
      i.close.icon  
      h3.ui.header 
        i.info.circle.icon
        | Info about News Source  
      .content
          .field
            h3.ui.header#post_info_body
              |  The New York Times (sometimes abbreviated as the NYT and NYTimes) is an American newspaper based in New York City with worldwide influence and readership. Founded in 1851, the paper has won 125 Pulitzer Prizes, more than any other newspaper. The Times is ranked 17th in the world by circulation and 2nd in the U.S.        

      .actions
        .ui.positive.right.labeled.icon.button
          | Done
          i.checkmark.icon


block scripts
  script().
    var info_text = 'No Information Found';
    let post_info_description = new Map([
        ['WWW.NEWSNETWORK.COM.CO','News Network provides the most up to date local and national news.'],
        ['WWW.NYTIMES.COM','The New York Times (sometimes abbreviated as the NYT and NYTimes) is an American newspaper based in New York City with worldwide influence and readership. Founded in 1851, the paper has won 125 Pulitzer Prizes, more than any other newspaper. The Times is ranked 17th in the world by circulation and 2nd in the U.S.'],
        ['WWW.NPR.ORG','National Public Radio (NPR, stylized as npr) is an American privately and publicly funded non-profit membership media organization based in Washington, D.C.']
        ]);
    
    $('.ui.accordion').accordion();   
    function startIntro(){
        var hints;
        clickCount = 0;
        var literacy_counter = 0;
        var intro = introJs().setOptions({ 'hidePrev': true, 'hideNext': true, 'exitOnOverlayClick': false, 'showStepNumbers':false, 'showBullets':false, 'scrollToElement':true, 'doneLabel':'Done &#10003' });
        
        intro.setOptions({
          steps: [
            { 
              element: document.querySelectorAll('#step1')[0],
              intro: "In this activity, let's look at the signs of fake news on social media. See if you can spot the clues!",
              position:'left',
              scrollTo:'tooltip'
            },
            { 
              element: document.querySelectorAll('#step1')[0],
              intro: "Click on the blue dots&nbsp;<a role='button' tabindex='0' class='introjs-hint'><div class='introjs-hint-dot'></div><div class='introjs-hint-pulse'></div></a> &nbsp; &nbsp; &nbsp; to learn more...",
              position:'left',
              scrollTo:'tooltip'
            }
            
          ]
        });
        
        intro.start().onexit(function() {
          
          hints = introJs().addHints();
          
          hints.onhintclick(function() {
              clickCount++;
              if(clickCount > 4){
                //show the guidance message, user probably doesn't know to click "got it"
                if($('#removeHidden').is(":hidden")){
                  $('#removeHidden').transition('fade');
                  $('#digitalLiteracySimButton').css("margin-bottom", "10em");
                } else {
                  $('#removeHidden').transition('bounce');
                }
              }
          });
          
          hints.onhintclose(function(e) {
           literacy_counter++;
           clickCount = 0;
           if($('#removeHidden').is(":visible")){
             $('#removeHidden').transition('fade');
             if($('#clickAllDotsWarning').is(":hidden")){
               $('#digitalLiteracySimButton').css("margin-bottom", "4em");
             }
           }
           if(literacy_counter == 4) {
             if($('#clickAllDotsWarning').is(':visible')){
               $('#clickAllDotsWarning').transition('fade');
               $('#digitalLiteracySimButton').css("margin-bottom", "4em");
             }
             $( ".cybertrans" ).addClass("green");
           }
          });
        
        //error messaging
        $('#digitalLiteracySimButton').on('click', function() {
          if(literacy_counter != 4){
            //show the message normally the first time
            if($('#clickAllDotsWarning').is(":hidden")){
              $('#clickAllDotsWarning').transition('fade');
              $('#digitalLiteracySimButton').css("margin-bottom", "10em");
            }else{
              //otherwise, bounce the message to draw attention to it
              $('#clickAllDotsWarning').transition('bounce');
            }
          }
        });
        
        //showing the "Need some help?" guidance message after a total of 2 minutes
        setInterval(function(){
          if($('#removeHidden').is(":hidden")){
            if(literacy_counter != 4){
              //user does not know to click blue dots
              $('#removeHidden').transition('fade');
              $('#digitalLiteracySimButton').css('margin-bottom', '10em');
            }
          }
        },120000);
      });  
    };
      
  
      

      $(window).on("load", function() {startIntro();});


      function openPost(){
        $('#next_steps').modal('show');
      }


    //get add new feed post modal to work
      $(".info_button").click(function () {
        //- console.log($('.info_button').next());
        //- console.log($(this).attr('id'));
        var clickedId = '#' + $(this).attr('id');
        info_header = $(clickedId).next()[0].innerText;
          //- console.log(info_header.toString());
        info_text = post_info_description.get(info_header.toString().trim()) || 'No Information Found';
        //- console.log(info_header  + info_text );
        //- document.getElementById('post_info_header').innerHTML = info_header;
        document.getElementById('post_info_body').innerHTML = info_text;
        //console.log("Clicking new Post");
        $('#info_modal').modal('show');
      });
