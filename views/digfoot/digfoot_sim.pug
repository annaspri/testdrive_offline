
extends ../ui_layout
  
block content
  -var cdn = "https://dhpd030vnpk29.cloudfront.net";
  .computer.only.tablet.only.four.wide.column 
  #content.eight.wide.computer.ten.wide.tablet.sixteen.wide.mobile.column()

    .ui.one.column.centered.grid(style="padding-top:1em;")
      .ui.fixed.bottom.sticky(style="padding-bottom:6em;")
        .ui.icon.compact.message.warning(style="display:none;")#removeHidden
          i.close.icon
          i.question.icon.float
          .content
            .ui.header Need some help? 
            p Make sure you are clicking "Got it" on the blue dots!
          
        .ui.icon.message.warning(style="display:none;")#clickAllDotsWarning
          i.close.icon
          i.hand.pointer.icon.float
          .content
            .ui.header There are still blue dots to find!
            p Click through all of the blue dots to continue.
                    
    .ui.small.modal#digfoot_sim_modal
      i.close.icon  
      .header How would this post influence digital footprints?
      .content
          .ui.form
             .field
               .ui.checkbox
                 input(type='checkbox')
                 label The post will have a negative impact on this person‚Äôs digital footprint.
             .field
               .ui.checkbox
                 input(type='checkbox')
                 label This person was sharing something that they might later regret.
             .field
               .ui.checkbox
                 input(type='checkbox')
                 label The post was not considerate of other people‚Äôs digital footprints.
             .field
               .ui.checkbox
                 input(type='checkbox')
                 label The post will not have an impact on this person‚Äôs digital footprint. 
             .field
               .ui.checkbox
                 input(type='checkbox')
                 label This was a responsible post that will create a positive digital footprint.

      .actions
        .ui.positive.right.labeled.icon.button
          | Done
          i.checkmark.icon
    
    
    #newpost.ui.fluid.left.labeled.right.icon.input(style="margin-top:1em;" data-hint=" How can you have a positive impact on your digital footprint? You can post things related to your hobbies, your school activities, or any other interests!", data-position="top-left")
      .ui.label
        if user.profile.picture
          img.ui.avatar.image(src=cdn+'/profile_pictures/'+user.profile.picture)
        else
          img.ui.avatar.image(src=cdn+user.gravatar(60))
      input(type='text', placeholder='Create a post')
      i.big.photo.link.icon

    .ui.fluid.card.test#step1
      .ui.dimmer.flag
        .content
          .center
            h2.ui.inverted.icon.header
              i.red.flag.icon
              |                                     You &apos;ve flagged this!
              h3.ui.inverted.header
                span The admins will review this post further. We are sorry you had this experience.
      .content
        .right.floated.meta= "Yesterday"
        a(href='#')
              img.ui.avatar.image(src=cdn+'/profile_pictures/user71.JPG')
              span='Andrew Thomas'
      .img.post
        img(src=cdn+'/post_pictures/digfootga1new.jpg' style='max-width:100%;' onclick='openPostDigfootSim()')
      .content
        .description(data-hint="Read this post and then click on it to think more about how a post like this impacts someone‚Äôs digital footprint.", data-hintPosition="bottom-right") Like my post if you think math is stupid. haha anyone have hw i can copy?
      .three.ui.bottom.attached.icon.buttons
        .ui.reply.button(tabindex='0')
          i.reply.icon
          |                             Reply
        .ui.flag.button(tabindex='0')
          i.flag.icon
          |                             Flag
        .ui.labeled.button(tabindex='0')
          .ui.like.button
            i.heart.icon
            |                                 Like
          a.ui.basic.red.left.pointing.label.count 2
      .content
        .ui.comments
          .comment(commentid='5bbd01d88a48061a73337b96')
            a.avatar
              img(src=cdn+'/profile_pictures/user52.jpg')
            .content
              a.author Connor McCormick
              .metadata
                span.date Yesterday
                .rating
                  i.heart.icon
                  span.num 1
                  |                                             Likes
              .text haha yeah math sucks
              .actions
                a.like.comment Like
                a.flag.comment Flag
      .extra.content
        .ui.fluid.left.labeled.right.icon.input
          .ui.label
            img.ui.avatar.image(src=cdn+'/profile_pictures/'+user.profile.picture, name=user.profile.name)
          input.newcomment(type='text' placeholder='Write a Comment')
          i.big.send.link.icon
    //-#######################
    .ui.fluid.card.dim()
      .ui.dimmer.flag
        .content
          .center
            h2.ui.inverted.icon.header
              i.red.flag.icon
              |                                     You &apos;ve flagged this!
              h3.ui.inverted.header
                span The admins will review this post further. We are sorry you had this experience.
      .content(data-hint="Read this post and then click on it to think more about how a post like this impacts someone‚Äôs digital footprint.", data-hintPosition="middle-middle")
        .right.floated.meta= "Yesterday"
        a(href='#')
              img.ui.avatar.image(src=cdn+'/profile_pictures/user50.jpg')
              span='Jenny Schmidt'
      .img.post
        img(src=cdn+'/post_pictures/digfootga2.jpg' style='max-width:100%;' onclick='openPostDigfootSim()')
      .content
        .description Here is a picture of my cat!!
      .three.ui.bottom.attached.icon.buttons
        .ui.reply.button(tabindex='0')
          i.reply.icon
          |                             Reply
        .ui.flag.button(tabindex='0')
          i.flag.icon
          |                             Flag
        .ui.labeled.button(tabindex='0')
          .ui.like.button
            i.heart.icon
            |                                 Like
          a.ui.basic.red.left.pointing.label.count 2
      .content
        .ui.comments
          .comment(commentid='5bbd01d88a48061a73337b96')
            a.avatar
              img(src=cdn+'/profile_pictures/user24.jpg')
            .content
              a.author Jenny Chen
              .metadata
                span.date Yesterday
                .rating
                  i.heart.icon
                  span.num 1
                  |                                             Likes
              .text Wow really cuteüòç
              .actions
                a.like.comment Like
                a.flag.comment Flag
      .extra.content
        .ui.fluid.left.labeled.right.icon.input
          .ui.label
            img.ui.avatar.image(src=cdn+'/profile_pictures/'+user.profile.picture, name=user.profile.name)
          input.newcomment(type='text' placeholder='Write a Comment')
          i.big.send.link.icon
    //-##########
    
    .ui.fluid.card.test
        .ui.dimmer.flag
          .content
            .center
              h2.ui.inverted.icon.header
                i.red.flag.icon
                |                                     You &apos;ve flagged this!
                h3.ui.inverted.header
                  span The admins will review this post further. We are sorry you had this experience.
        .content(data-hint="Remember, your digital footprint can affect your reputation online and offline! Think about who can see your post and how they might view you as a result.", data-hintPosition="middle-middle")
          .right.floated.meta= "Yesterday"
          a(href='#')
                img.ui.avatar.image(src=cdn+'/profile_pictures/user40.jpg')
                span='Susan Turner'
        .img.post
          img(src=cdn+'/post_pictures/digfootga3new.jpg' style='max-width:100%;' onclick='openPostDigfootSim()')
        .content
          .description(data-hint="If someone posts something you don‚Äôt want to have as part of your digital footprint, you can ask them to delete it through a private message." data-hintPosition="bottom-right") pic of me and donna skipping class and hanging out @ a cafe today üòÇ
        .three.ui.bottom.attached.icon.buttons
          .ui.reply.button(tabindex='0')
            i.reply.icon
            |                             Reply
          .ui.flag.button(tabindex='0')
            i.flag.icon
            |                             Flag
          .ui.labeled.button(tabindex='0')
            .ui.like.button
              i.heart.icon
              |                                 Like
            a.ui.basic.red.left.pointing.label.count 2
        .content
          .ui.comments
            .comment(commentid='5bbd01d88a48061a73337b96')
              a.avatar
                img(src=cdn+'/profile_pictures/user66.jpeg')
              .content
                a.author Michelle Rose
                .metadata
                  span.date Yesterday
                  .rating
                    i.heart.icon
                    span.num 1
                    |                                             Likes
                .text lol!!
                .actions
                  a.like.comment Like
                  a.flag.comment Flag           
        .extra.content
          .ui.fluid.left.labeled.right.icon.input
            .ui.label
              img.ui.avatar.image(src=cdn+'/profile_pictures/'+user.profile.picture, name=user.profile.name)
            input.newcomment(type='text' placeholder='Write a Comment')
            i.big.send.link.icon
    

    //-#######################
    .ui.fluid.card.dim()
      .ui.dimmer.flag
        .content
          .center
            h2.ui.inverted.icon.header
              i.red.flag.icon
              |                                     You &apos;ve flagged this!
              h3.ui.inverted.header
                span The admins will review this post further. We are sorry you had this experience.
      .content
        .right.floated.meta= "Yesterday"
        a(href='#')
              img.ui.avatar.image(src=cdn+'/profile_pictures/user24.jpg')
              span='Jenny Chen'
      .img.post
        img(src=cdn+'/post_pictures/digfootga4.jpg' style='max-width:100%;' onclick='openPostDigfootSim()')
      .content
        .description I don't want summer to end!!
      .three.ui.bottom.attached.icon.buttons
        .ui.reply.button(tabindex='0')
          i.reply.icon
          |                             Reply
        //.ui.flag.button(data-hint="Press the ‚Äúflag‚Äù button to report this post to the website.", data-position="bottom-right")
          i.flag.icon
          |                             Flag
        .ui.flag.button()
          i.flag.icon
          |                             Flag
        .ui.labeled.button(tabindex='0')
          .ui.like.button
            i.heart.icon
            |                                 Like
          a.ui.basic.red.left.pointing.label.count 2
      .content
        .ui.comments
          .comment(commentid='5bbd01d88a48061a73337b96')
            a.avatar
              img(src=cdn+'/profile_pictures/user63.jpg')
            .content
              a.author Liam Knapke
              .metadata
                span.date Yesterday
                .rating
                  i.heart.icon
                  span.num 1
                  |                                             Likes
              .text back to school soonüôÅ
              .actions
                a.like.comment Like
                a.flag.comment Flag
      .extra.content
        .ui.fluid.left.labeled.right.icon.input
          .ui.label
            img.ui.avatar.image(src=cdn+'/profile_pictures/'+user.profile.picture, name=user.profile.name)
          input.newcomment(type='text' placeholder='Write a Comment')
          i.big.send.link.icon
            
    //-.ui.warning.message#clickAllDotsWarning(style="display:none;")
      .header
        | Click through all of the blue dots to continue
    button.ui.big.labeled.icon.button.cybertrans#cyberTransButton(style="margin-bottom:4em;")
          i.rocket.icon
          |   Let's Continue!

block scripts
  script().
  
    function openPostDigfootSim(){
      $('input[type=checkbox]').prop('checked',false);
      $('#digfoot_sim_modal').modal('show');
    }
    
    function startIntro(){
      
        var hints;
        clickCount = 0;
        counter = 0;
        var intro = introJs().setOptions({ 'hidePrev': true, 'hideNext': true, 'exitOnOverlayClick': false, 'showStepNumbers':false, 'showBullets':false, 'scrollToElement':true, 'doneLabel':'Done &#10003' });
        intro.setOptions({
          steps: [
            { 
              element: document.querySelectorAll('#step1')[0],
              intro: "Click on the blue dots&nbsp;<a role='button' tabindex='0' class='introjs-hint'><div class='introjs-hint-dot'></div><div class='introjs-hint-pulse'></div></a> &nbsp; &nbsp; &nbsp;to learn more...",
              position: "left",
              scrollTo: 'tooltip'
            }
            
          ]
        });
        
        intro.start().onexit(function() {
          hints = introJs().addHints();
          
          hints.onhintclick(function() {
              clickCount++;
              if(clickCount > 5){
                //show the guidance message, user probably doesn't know to click "got it"
                if($('#removeHidden').is(":hidden")){
                  $('#removeHidden').transition('fade');
                  $('#cyberTransButton').css('margin-bottom','10em');
                } else {
                  $('#removeHidden').transition('bounce');
                }
              }
          });
          
          hints.onhintclose(function() {
           counter++;
           clickCount = 0;
           if($('#removeHidden').is(":visible")){
             $('#removeHidden').transition('fade');
             if($('#clickAllDotsWarning').is(":hidden")){
               $('#cyberTransButton').css("margin-bottom", "4em");
             }
           }
           if(counter == 5) {
             if($('#clickAllDotsWarning').is(':visible')){
               $('#clickAllDotsWarning').transition('fade');
               $('#cyberTransButton').css("margin-bottom", "4em");
             }
             $( ".cybertrans" ).addClass("green");
           }
          });
          
        
        
          //error messaging
          $('#cyberTransButton').on('click', function() {
            if(counter != 5){
              //show the message normally the first time
              if($('#clickAllDotsWarning').is(":hidden")){
                $('#clickAllDotsWarning').transition('fade');
                $('#cyberTransButton').css("margin-bottom", "10em");
              }else{
                //otherwise, bounce the message to draw attention to it
                $('#clickAllDotsWarning').transition('bounce');
              }
            }
          });
          
          //showing the "Need some help?" guidance message after a total of 2 minutes
          setInterval(function(){
            if($('#removeHidden').is(":hidden")){
              if(counter != 5){
                //user does not know to click blue dots
                $('#removeHidden').transition('fade');
                $('#cyberTransButton').css('margin-bottom', '10em');
              }
            }
          },120000);
          
        });
        
        $('#cyberTransButton').on('click', function(){
          if($('#removeHidden').is(":visible") || $('#clickAllDotsWarning').is(":visible")){
            $('#cyberTransButton').css('margin-bottom', '10em');
          }else{
            $('#cyberTransButton').css('margin-bottom', '4em');
          }
        });
      };

      $(window).on("load", function() {startIntro();});
      
